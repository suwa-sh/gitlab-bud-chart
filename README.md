# GitLab Bud Chart

GitLab ã® issue ã‚’åˆ†æã—ã€burn-up/burn-down ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºã¨ product backlog è¡¨ç¤ºã‚’è¡Œã† Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

## å‹•ä½œã‚¤ãƒ¡ãƒ¼ã‚¸

| ![](/docs/images/dashboard.png) | ![](/docs/images/pbl-viewer.png) |
| ------------------------------- | -------------------------------- |

## ä½¿ã„æ–¹

- æœ€æ–°ã®ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ

  ```bash
  # å‰æ: port 3000 ãŒç©ºã„ã¦ã„ã‚‹ã“ã¨
  git clone https://github.com/suwa-sh/gitlab-bud-chart.git
  cd gitlab-bud-chart/docker

  cat << __EOF__ > .env
  SERVER_PORT=3000
  # gitlabæ¥ç¶šã®åˆæœŸå€¤
  #VITE_GITLAB_URL=
  #VITE_GITLAB_TOKEN=
  #VITE_GITLAB_PROJECT_ID=
  #VITE_HTTP_PROXY=
  #VITE_HTTPS_PROXY=
  #VITE_NO_PROXY=
  __EOF__

  docker compose pull
  docker compose up

  open http://localhost:3000
  ```

- ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ«ãƒ‰ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆ

  ```bash
  # gitlab containerã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã€äº‹å‰ã«èµ·å‹•
  docker compose -f docker-compose.gitlab.yml up

  # gitlab containerã®PAT(Personal Access Token)ç”Ÿæˆã—ã€docker/.envã«æ›¸ãè¾¼ã¿
  ../scripts/generate_gitlab_pat.sh
  # ã‚µãƒ³ãƒ—ãƒ«issueç™»éŒ²
  ../scripts/generate_gitlab_test_data.py

  # ãƒ­ãƒ¼ã‚«ãƒ«ã‚½ãƒ¼ã‚¹ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦å®Ÿè¡Œ
  docker compose -f docker-compose.local.yml build
  docker compose -f docker-compose.local.yml up
  ```

## ç”»é¢æ§‹æˆ

### Dashboard

- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ã®å¯è¦–åŒ–**: Burn-up/Burn-down ãƒãƒ£ãƒ¼ãƒˆã«ã‚ˆã‚‹é€²æ—çŠ¶æ³æŠŠæ¡
- **ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å¹… 100%ã€Both/Burn Down/Burn Up ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
- **çµ±è¨ˆæƒ…å ±**: ç·ãƒã‚¤ãƒ³ãƒˆã€å®Œäº†ãƒã‚¤ãƒ³ãƒˆã€å®Œäº†ç‡ã€æ®‹ãƒã‚¤ãƒ³ãƒˆã€æ®‹æ—¥æ•°ï¼ˆå–¶æ¥­æ—¥ãƒ™ãƒ¼ã‚¹ï¼‰
- **æœŸé–“è¨­å®š**: é–‹å§‹æ—¥ãƒ»çµ‚äº†æ—¥ã«ã‚ˆã‚‹åˆ†ææœŸé–“ã®æŒ‡å®š
- **è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿**: 12 ç¨®é¡ã®ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆServiceã€Milestoneã€Epicã€Title æ¤œç´¢ã€Point ç¯„å›²ã€Kanban Statusã€Assigneeã€ä½œæˆæ—¥ç¯„å›²ã€å®Œäº†æ—¥ç¯„å›²ã€Stateã€Chart Viewï¼‰
- **Issues ä¸€è¦§**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒšãƒ¼ã‚¸ãƒ³ã‚°ç„¡åŠ¹ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å¹… 100%ã€ã‚½ãƒ¼ãƒˆå¯èƒ½
- **è­¦å‘Šè¡¨ç¤ºæ©Ÿèƒ½**: ãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆã®å¯èƒ½æ€§ãŒã‚ã‚‹Issueã®è­¦å‘Šè¡¨ç¤ºï¼ˆæœŸé–“å‰å®Œäº†ãƒ»æœŸé–“å¾Œå®Œäº†ãƒ»Due Dateæœªè¨­å®šã®å®Œäº†Issueï¼‰
- **URL å…±æœ‰æ©Ÿèƒ½**: ç¾åœ¨ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ¡ä»¶ã‚’å«ã‚€ URL ã‚’ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼

### PBL Viewer

- **Product Backlog ç®¡ç†**: å…¨ Issue ä¸€è¦§è¡¨ç¤ºï¼ˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å¹… 100%ã€ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼‰
- **çµ±è¨ˆæƒ…å ±**: Issue ä»¶æ•°ã€ç·ãƒã‚¤ãƒ³ãƒˆæ•°ã€å®Œäº†ãƒã‚¤ãƒ³ãƒˆã€å®Œäº†ç‡ï¼ˆDashboard ã¨çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰
- **è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿ãƒ»æ¤œç´¢**: 11 ç¨®é¡ã®ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆæœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ã¯è¡¨ç¤ºã®ã¿ã€API é€ä¿¡ãªã—ï¼‰
- **Issue è©³ç´°è¡¨ç¤º**: ã‚½ãƒ¼ãƒˆå¯èƒ½ã€å…¨ä»¶è¡¨ç¤ºå¯¾å¿œ
- **CSV ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥å„ªå…ˆ**: åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã‚’å„ªå…ˆåˆ©ç”¨
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒšãƒ¼ã‚¸ãƒ³ã‚°ç„¡åŠ¹**: å…¨ä»¶è¡¨ç¤ºã§ãƒ‡ãƒ¼ã‚¿æŠŠæ¡ã‚’é‡è¦–
- **URL å…±æœ‰æ©Ÿèƒ½**: ç¾åœ¨ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ¡ä»¶ã‚’å«ã‚€ URL ã‚’ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼

## è¡¨ç¤ºæ¡ä»¶ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

### çµ±ä¸€ã•ã‚ŒãŸãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 

#### çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿ãƒ«ãƒ¼ãƒ«

Dashboard ã¨ PBL Viewer ã§å…±é€šã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã‚’é©ç”¨ï¼š

1. **é™¤å¤–ãƒ«ãƒ¼ãƒ«**: ä»¥ä¸‹ã® kanban_status ã‚’è‡ªå‹•é™¤å¤–

   - `ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ` (GitLab ãƒ©ãƒ™ãƒ«: `#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ`)
   - `ã‚´ãƒ¼ãƒ«/ã‚¢ãƒŠã‚¦ãƒ³ã‚¹` (GitLab ãƒ©ãƒ™ãƒ«: `#ã‚´ãƒ¼ãƒ«/ã‚¢ãƒŠã‚¦ãƒ³ã‚¹`)
   - `ä¸è¦` (GitLab ãƒ©ãƒ™ãƒ«: `#ä¸è¦`)

2. **æ—¥ä»˜è£œæ­£**: `created_at > completed_at` ã®å ´åˆã¯ `created_at = completed_at` ã«ã€`created_at < start_date` ã®å ´åˆã¯ `created_at = start_date` ã«è‡ªå‹•è£œæ­£

3. **å®Œäº†åŸºæº–çµ±ä¸€**: `completed_at` ã®å­˜åœ¨ã«ã‚ˆã‚Šå®Œäº†åˆ¤å®šï¼ˆå¾“æ¥ã® `state` ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å¤‰æ›´ï¼‰

#### URL å…±æœ‰æ©Ÿèƒ½

ä¸¡ç”»é¢ã§ä»¥ä¸‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ URL ã‚¯ã‚¨ãƒªã‚¹ãƒˆãƒªãƒ³ã‚°ã¨ã—ã¦ä¿å­˜ãƒ»å…±æœ‰å¯èƒ½ï¼š

- **ãƒ•ã‚£ãƒ«ã‚¿ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: service, milestone, assignee, kanban_status, state, is_epic, quarter
- **æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: searchï¼ˆã‚¿ã‚¤ãƒˆãƒ«æ¤œç´¢ï¼‰
- **ãƒã‚¤ãƒ³ãƒˆç¯„å›²**: min_point, max_point
- **æ—¥ä»˜ç¯„å›²**: created_after/before, completed_after/before
- **ã‚½ãƒ¼ãƒˆè¨­å®š**: sortKey, sortDirection
- **æœŸé–“è¨­å®š** (Dashboard ã®ã¿): period_start, period_end

**ä½¿ç”¨ä¾‹**:

```
/pbl-viewer?service=API&milestone=2024Q1&sortKey=point&sortDirection=desc
/dashboard?period_start=2024-01-01&period_end=2024-03-31&state=closed&sortKey=created_at&sortDirection=asc
```

**å…±æœ‰æ–¹æ³•**:

1. ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ¡ä»¶ã‚’è¨­å®š
2. ã€ŒğŸ”— URL ã‚’å…±æœ‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. URL ãŒè‡ªå‹•çš„ã«ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹
4. å…±æœ‰ã•ã‚ŒãŸ URL ã‚’é–‹ãã¨ã€åŒã˜æ¡ä»¶ã§è¡¨ç¤ºã•ã‚Œã‚‹

### Dashboard è¡¨ç¤ºæ¡ä»¶

#### ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•

- **API**: `/api/issues/` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ç”¨
- **æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿**: `chart_start_date`, `chart_end_date` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æœŸé–“æŒ‡å®š
- **ãƒ•ã‚£ãƒ«ã‚¿é †åº**: çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨ â†’ ã‚¹ã‚³ãƒ¼ãƒ—ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: è¨­å®šå¤‰æ›´æ™‚ã«å¸¸ã« API å†å‘¼ã³å‡ºã—

#### ãƒãƒ£ãƒ¼ãƒˆç”Ÿæˆæ¡ä»¶

- **å¯¾è±¡ãƒ‡ãƒ¼ã‚¿**: çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿ + ã‚¹ã‚³ãƒ¼ãƒ—ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨æ¸ˆã¿ Issue
- **å–¶æ¥­æ—¥è¨ˆç®—**: æ—¥æœ¬ã®ç¥æ—¥ã‚’è€ƒæ…®ã—ãŸå–¶æ¥­æ—¥ãƒ™ãƒ¼ã‚¹ã®ç†æƒ³ç·š
- **çµ±è¨ˆè¡¨ç¤º**: ç·ãƒã‚¤ãƒ³ãƒˆã€å®Œäº†ãƒã‚¤ãƒ³ãƒˆã€å®Œäº†ç‡ã€æ®‹ãƒã‚¤ãƒ³ãƒˆã€æ®‹æ—¥æ•°ï¼ˆå–¶æ¥­æ—¥ï¼‰

#### ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—ãƒ«ãƒ¼ãƒ«

Dashboard ã¨ PBL Viewer ã§é©ç”¨ã•ã‚Œã‚‹çµ±ä¸€ã•ã‚ŒãŸãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã€‚4 æ®µéšã®å‡¦ç†ã§ Issue ã®è¡¨ç¤ºå¯¾è±¡ã‚’æ±ºå®šã—ã¾ã™ã€‚

##### 1. å››åŠæœŸãƒ•ã‚£ãƒ«ã‚¿

æœŸé–“ã«å¯¾å¿œã™ã‚‹ä¼šè¨ˆå¹´åº¦å››åŠæœŸã®ãƒ©ãƒ™ãƒ«ã‚’æŒã¤Issueã®ã¿ã‚’å¯¾è±¡ã¨ã—ã¾ã™ã€‚

**å››åŠæœŸãƒãƒƒãƒ”ãƒ³ã‚°:**
- Q1: 4æœˆ-6æœˆ
- Q2: 7æœˆ-9æœˆ  
- Q3: 10æœˆ-12æœˆ
- Q4: 1æœˆ-3æœˆ

**ä¾‹:**
- æœŸé–“: 2025-01-01ï½2025-07-31
- å¯¾è±¡å››åŠæœŸ: @FY24Q4, @FY25Q1, @FY25Q2
- @FY25Q3ãƒ©ãƒ™ãƒ«ã®Issueã¯é™¤å¤–

##### 2. çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿ãƒ«ãƒ¼ãƒ«

**é™¤å¤–å¯¾è±¡ kanban_status:**

| kanban_status     | GitLab ãƒ©ãƒ™ãƒ«        | é™¤å¤–ç†ç”±                         | ä¾‹                       |
| ----------------- | -------------------- | -------------------------------- | ------------------------ |
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ      | `#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ`      | Issue ä½œæˆç”¨ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ       | ã€ŒIssue ä½œæˆæ™‚ã®å‚è€ƒç”¨ã€ |
| ã‚´ãƒ¼ãƒ«/ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ | `#ã‚´ãƒ¼ãƒ«/ã‚¢ãƒŠã‚¦ãƒ³ã‚¹` | é€²æ—ç®¡ç†å¯¾è±¡å¤–ã®å‘ŠçŸ¥äº‹é …         | ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®æ¨™è¨­å®šã€ |
| ä¸è¦              | `#ä¸è¦`              | å‰Šé™¤äºˆå®šãƒ»ä¸è¦ã¨åˆ¤å®šã•ã‚ŒãŸ Issue | ã€Œé‡è¤‡ Issueãƒ»èª¤ä½œæˆã€   |

##### 2. æ—¥ä»˜è£œæ­£ãƒ«ãƒ¼ãƒ«

**è£œæ­£æ¡ä»¶ã¨æ–¹æ³•:**

| æ¡ä»¶                        | è£œæ­£å‰                                                | è£œæ­£å¾Œ                                                | è£œæ­£ç†ç”±                                           |
| --------------------------- | ----------------------------------------------------- | ----------------------------------------------------- | -------------------------------------------------- |
| `created_at > completed_at` | created_at = 2024-02-20<br/>completed_at = 2024-02-15 | created_at = 2024-02-15<br/>completed_at = 2024-02-15 | ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºä¿<br/>ä½œæˆæ—¥ > å®Œäº†æ—¥ã¯è«–ç†çš„ã«çŸ›ç›¾ |
| `created_at < start_date`   | created_at = 2023-12-15<br/>start_date = 2024-01-01   | created_at = 2024-01-01<br/>start_date = 2024-01-01   | æœŸé–“é–‹å§‹å‰ã®Issueã‚’æœŸé–“é–‹å§‹æ—¥ã«èª¿æ•´                |
| `created_at â‰¤ completed_at` | created_at = 2024-02-10<br/>completed_at = 2024-02-15 | **è£œæ­£ãªã—**                                          | æ­£å¸¸ãªãƒ‡ãƒ¼ã‚¿                                       |
| `completed_at = null`       | created_at = 2024-02-10<br/>completed_at = null       | **è£œæ­£ãªã—**                                          | æœªå®Œäº† Issueï¼ˆæ­£å¸¸ï¼‰                               |

##### 4. ã‚¹ã‚³ãƒ¼ãƒ—åˆ¤å®šãƒ«ãƒ¼ãƒ«

**é™¤å¤–ãƒ«ãƒ¼ãƒ«:**
1. `completed_at` ãŒæœŸé–“çµ‚äº†æ—¥ã‚ˆã‚Šæœªæ¥ã® Issue ã¯é™¤å¤–
2. `completed_at` ãŒæœŸé–“é–‹å§‹æ—¥ã‚ˆã‚Šéå»ã® Issue ã¯é™¤å¤–  
3. kanban_statusãŒã€Œå®Œäº†ã€ã€Œå…±æœ‰å¾…ã¡ã€ã§ `due_date` ãŒæœªè¨­å®šã® Issue ã¯é™¤å¤–
4. `created_at` ãŒæœŸé–“çµ‚äº†æ—¥ã‚ˆã‚Šæœªæ¥ã® Issue ã¯é™¤å¤–

ä¸Šè¨˜ã®é™¤å¤–ãƒ«ãƒ¼ãƒ«ã«è©²å½“ã—ãªã„ Issueï¼ˆæœªå®Œäº†ã® Issue ãŠã‚ˆã³æœŸé–“å†…ã«å®Œäº†ã—ãŸ Issueï¼‰ãŒè¡¨ç¤ºå¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚

##### é™¤å¤–Issueè­¦å‘Šè¡¨ç¤º

**è­¦å‘Šã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦**

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§è­¦å‘Šåˆ¤å®šã‚’è¡Œã„ã€ãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆã®å¯èƒ½æ€§ãŒã‚ã‚‹Issueã‚’3ç¨®é¡ã«åˆ†é¡ã—ã¦è­¦å‘Šè¡¨ç¤ºã—ã¾ã™ï¼š

**è­¦å‘Šã‚¿ã‚¤ãƒ—:**

1. **æœŸé–“å‰å®Œäº†**: `completed_at` ãŒæœŸé–“é–‹å§‹æ—¥ã‚ˆã‚Šå‰ã®Issue
   - ä¾‹: æœŸé–“ 2024-01-01ï½2024-03-31ã€completed_at = 2023-12-15
   - æœŸé–“å¤–ã§å®Œäº†ã—ã¦ã„ã‚‹ãŸã‚ã€é€²æ—ãƒãƒ£ãƒ¼ãƒˆã®ç²¾åº¦ã«å½±éŸ¿

2. **æœŸé–“å¾Œå®Œäº†**: `completed_at` ãŒæœŸé–“çµ‚äº†æ—¥ã‚ˆã‚Šå¾Œã®Issue  
   - ä¾‹: æœŸé–“ 2024-01-01ï½2024-03-31ã€completed_at = 2024-04-15
   - æœŸé–“å¤–ã§å®Œäº†ã—ã¦ã„ã‚‹ãŸã‚ã€é€²æ—ãƒãƒ£ãƒ¼ãƒˆã®ç²¾åº¦ã«å½±éŸ¿

3. **Due Dateæœªè¨­å®š**: kanban_statusãŒã€Œå®Œäº†ã€ã€Œå…±æœ‰å¾…ã¡ã€ã ãŒ `due_date` ãŒæœªè¨­å®šã®Issue
   - completed_atãŒæ­£ã—ãè¨ˆç®—ã•ã‚Œãªã„ãŸã‚ã€ã‚¹ã‚³ãƒ¼ãƒ—ã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹
   - é€²æ—ç®¡ç†ã®ç²¾åº¦å‘ä¸Šã®ãŸã‚Due Dateè¨­å®šã‚’æ¨å¥¨

4. **æœŸé–“å¾Œä½œæˆ**: `created_at` ãŒæœŸé–“çµ‚äº†æ—¥ã‚ˆã‚Šå¾Œã®Issue
   - ä¾‹: æœŸé–“ 2024-01-01ï½2024-03-31ã€created_at = 2024-04-15
   - æœŸé–“å¤–ã§ä½œæˆã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚¹ã‚³ãƒ¼ãƒ—ã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹

**è­¦å‘Šè¡¨ç¤ºUI:**
- å„Issueã¸ã®GitLabãƒªãƒ³ã‚¯ã‚’æä¾›
- æŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ãªUIã§è©³ç´°ç¢ºèª
- Issueä¸€è¦§ã¨ãƒãƒ£ãƒ¼ãƒˆã®ä¸¡æ–¹ã«é©ç”¨
- è­¦å‘Šç†ç”±ã‚’æ˜ç¢ºã«è¡¨ç¤º

##### ã‚¹ã‚³ãƒ¼ãƒ—ãƒ«ãƒ¼ãƒ«å›³è§£

```mermaid
gantt
    title Dashboardã‚¹ã‚³ãƒ¼ãƒ—ãƒ«ãƒ¼ãƒ«åˆ¤å®š (æœŸé–“ 2024-01-01 to 2024-03-31)
    dateFormat YYYY-MM-DD
    axisFormat %m/%d

    section âœ… å«ã¾ã‚Œã‚‹Issue
    Issue A (æœŸé–“å†…å®Œäº†)      :done, issue_a, 2024-01-15, 2024-02-15
    Issue B (æœªå®Œäº†)          :active, issue_b, 2024-02-01, 2024-06-01
    Issue C (æœŸé–“å¤–â†’æœŸé–“å†…å®Œäº†) :done, issue_c, 2023-12-01, 2024-02-01
    Issue D (æœŸé–“å¤–â†’æœªå®Œäº†)    :active, issue_d, 2023-11-01, 2024-06-01
    Issue E (æœŸé–“å¾Œâ†’æœªå®Œäº†)    :active, issue_e, 2024-04-15, 2024-06-01

    section âŒ é™¤å¤–ã•ã‚Œã‚‹Issue
    Issue F (æœŸé–“å†…â†’æœŸé–“å¾Œå®Œäº†) :crit, issue_f, 2024-02-15, 2024-04-15
    Issue G (æœŸé–“å‰å®Œäº†)       :crit, issue_g, 2023-11-01, 2023-12-15
    Issue H (ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ)     :crit, issue_h, 2024-02-01, 2024-02-15
    Issue I (ä¸è¦)            :crit, issue_i, 2024-01-10, 2024-01-20
    Issue J (å››åŠæœŸå¤–)        :crit, issue_j, 2024-02-01, 2024-02-15

    Issue K (Due Dateæœªè¨­å®šå®Œäº†) :crit, issue_k, 2024-02-01, 2024-02-28
    Issue L (æœŸé–“å¾Œä½œæˆ)       :crit, issue_l, 2024-04-15, 2024-06-01

    section é‡è¦ãªå¢ƒç•Œ
    æœŸé–“é–‹å§‹                  :milestone, period_start, 2024-01-01, 0d
    æœŸé–“çµ‚äº†                  :milestone, period_end, 2024-03-31, 0d
```

**ã‚¹ã‚³ãƒ¼ãƒ—åˆ¤å®šã®å…·ä½“ä¾‹:**

**ãƒ†ã‚¹ãƒˆæœŸé–“: 2024-01-01 ï½ 2024-03-31**

| Issue | å››åŠæœŸ    | å‡¦ç†æ®µéš         | kanban_status | created_at | completed_at | due_date | state  | æœ€çµ‚åˆ¤å®š | é©ç”¨ãƒ«ãƒ¼ãƒ«                       |
| ----- | --------- | ---------------- | ------------- | ---------- | ------------ | -------- | ------ | -------- | -------------------------------- |
| A     | @FY23Q4   | ã‚¹ã‚³ãƒ¼ãƒ—é€šé     | #å®Œäº†         | 2024-01-15 | 2024-02-15   | 2024-02-15 | closed | âœ… å«ã‚€  | æœŸé–“å†…å®Œäº†                       |
| B     | @FY23Q4   | ã‚¹ã‚³ãƒ¼ãƒ—é€šé     | #ä½œæ¥­ä¸­       | 2024-02-01 | -            | -        | opened | âœ… å«ã‚€  | æœªå®Œäº†                           |
| C     | @FY23Q4   | ã‚¹ã‚³ãƒ¼ãƒ—é€šé     | #å®Œäº†         | 2023-12-01 | 2024-02-01   | 2024-02-01 | closed | âœ… å«ã‚€  | æœŸé–“å†…å®Œäº†                       |
| D     | @FY23Q4   | ã‚¹ã‚³ãƒ¼ãƒ—é€šé     | #ä½œæ¥­ä¸­       | 2023-11-01 | -            | -        | opened | âœ… å«ã‚€  | æœªå®Œäº†                           |
| E     | @FY23Q4   | ã‚¹ã‚³ãƒ¼ãƒ—é€šé     | #ä½œæ¥­ä¸­       | 2024-04-15 | -            | -        | opened | âœ… å«ã‚€  | æœªå®Œäº†                           |
| F     | @FY23Q4   | ã‚¹ã‚³ãƒ¼ãƒ—é™¤å¤–     | #å®Œäº†         | 2024-02-15 | 2024-04-15   | 2024-04-15 | closed | âŒ é™¤å¤–  | æœŸé–“å¾Œå®Œäº†ï¼ˆé™¤å¤–ãƒ«ãƒ¼ãƒ«1ï¼‰â†’è­¦å‘Šè¡¨ç¤º|
| G     | @FY23Q4   | ã‚¹ã‚³ãƒ¼ãƒ—é™¤å¤–     | #å®Œäº†         | 2023-11-01 | 2023-12-15   | 2023-12-15 | closed | âŒ é™¤å¤–  | æœŸé–“å‰å®Œäº†ï¼ˆé™¤å¤–ãƒ«ãƒ¼ãƒ«2ï¼‰â†’è­¦å‘Šè¡¨ç¤º|
| H     | @FY23Q4   | çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿é™¤å¤– | #ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | 2024-02-01 | -            | -        | opened | âŒ é™¤å¤–  | çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿ãƒ«ãƒ¼ãƒ«               |
| I     | @FY23Q4   | çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿é™¤å¤– | #ä¸è¦         | 2024-01-10 | 2024-01-20   | 2024-01-20 | closed | âŒ é™¤å¤–  | çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿ãƒ«ãƒ¼ãƒ«               |
| J     | @FY24Q2   | å››åŠæœŸãƒ•ã‚£ãƒ«ã‚¿   | #ä½œæ¥­ä¸­       | 2024-02-01 | -            | -        | opened | âŒ é™¤å¤–  | å¯¾è±¡æœŸé–“å¤–ã®å››åŠæœŸ               |
| K     | @FY23Q4   | ã‚¹ã‚³ãƒ¼ãƒ—é™¤å¤–     | #å®Œäº†         | 2024-02-01 | -            | -        | opened | âŒ é™¤å¤–  | Due Dateæœªè¨­å®šå®Œäº†ï¼ˆé™¤å¤–ãƒ«ãƒ¼ãƒ«3ï¼‰â†’è­¦å‘Šè¡¨ç¤º|
| L     | @FY23Q4   | ã‚¹ã‚³ãƒ¼ãƒ—é™¤å¤–     | #ä½œæ¥­ä¸­       | 2024-04-15 | -            | -        | opened | âŒ é™¤å¤–  | æœŸé–“å¾Œä½œæˆï¼ˆé™¤å¤–ãƒ«ãƒ¼ãƒ«4ï¼‰â†’è­¦å‘Šè¡¨ç¤º       |

**å‡¦ç†ãƒ•ãƒ­ãƒ¼æ¦‚è¦:**

1. **å››åŠæœŸãƒ•ã‚£ãƒ«ã‚¿**: æœŸé–“ã«å¯¾å¿œã™ã‚‹ä¼šè¨ˆå¹´åº¦å››åŠæœŸã®ãƒ©ãƒ™ãƒ«ã‚’æŒã¤Issueã®ã¿ã‚’å¯¾è±¡
2. **çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ»ã‚´ãƒ¼ãƒ«/ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ»ä¸è¦ã‚’è‡ªå‹•é™¤å¤–
3. **æ—¥ä»˜è£œæ­£**: `created_at > completed_at`ã®å ´åˆã¯`created_at = completed_at`ã«ã€`created_at < start_date`ã®å ´åˆã¯`created_at = start_date`ã«ä¿®æ­£
4. **ã‚¹ã‚³ãƒ¼ãƒ—åˆ¤å®š**: completed_atãƒ™ãƒ¼ã‚¹ã®é™¤å¤–ãƒ«ãƒ¼ãƒ« + Due Dateæœªè¨­å®šå®Œäº†Issueé™¤å¤–ã§åˆ¤å®š

#### ãƒ•ã‚£ãƒ«ã‚¿é …ç›®ï¼ˆ12 ç¨®é¡ï¼‰

1. **æœŸé–“**: chart_start_date / chart_end_date
2. **Service**: ã‚µãƒ¼ãƒ“ã‚¹åã§ã®çµã‚Šè¾¼ã¿
3. **Milestone**: ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã§ã®çµã‚Šè¾¼ã¿
4. **Epic**: Epic/é€šå¸¸ Issue ã§ã®çµã‚Šè¾¼ã¿
5. **Title**: ã‚¿ã‚¤ãƒˆãƒ«éƒ¨åˆ†ä¸€è‡´æ¤œç´¢
6. **Point**: æœ€å°å€¤ãƒ»æœ€å¤§å€¤ã§ã®ç¯„å›²æŒ‡å®š
7. **Kanban Status**: ã‹ã‚“ã°ã‚“ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã®çµã‚Šè¾¼ã¿
8. **Assignee**: ã‚¢ã‚µã‚¤ãƒ‹ãƒ¼ã§ã®çµã‚Šè¾¼ã¿
9. **Created At**: ä½œæˆæ—¥ã®æœŸé–“æŒ‡å®š
10. **Completed At**: å®Œäº†æ—¥ã®æœŸé–“æŒ‡å®š
11. **State**: opened/closed ã§ã®çŠ¶æ…‹çµã‚Šè¾¼ã¿
12. **Chart View**: Both/Burn Down/Burn Up è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ

### PBL Viewer è¡¨ç¤ºæ¡ä»¶

#### ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•

- **API**: `/api/issues/` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ç”¨
- **çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿**: Dashboard ã¨åŒã˜é™¤å¤–ãƒ«ãƒ¼ãƒ«ãƒ»æ—¥ä»˜è£œæ­£ã‚’é©ç”¨
- **å®Œäº†åŸºæº–**: Dashboard ã¨çµ±ä¸€ï¼ˆ`completed_at` ãƒ™ãƒ¼ã‚¹ï¼‰
- **å…¨é‡å–å¾—**: `per_page=10000` ã§å¤§é‡ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ‹¬å–å¾—
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥å„ªå…ˆ**: åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã‚’å„ªå…ˆåˆ©ç”¨
- **æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿é™¤å¤–**: API å‘¼ã³å‡ºã—æ™‚ã«æœŸé–“é–¢é€£ãƒ•ã‚£ãƒ«ã‚¿ã‚’å‰Šé™¤

#### çµ±è¨ˆè¡¨ç¤ºå½¢å¼

Dashboard ã«åˆã‚ã›ãŸçµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼š

- **issue ä»¶æ•°**: ç· Issue æ•°
- **ç·ãƒã‚¤ãƒ³ãƒˆæ•°**: å…¨ Issue ã®ãƒã‚¤ãƒ³ãƒˆåˆè¨ˆ
- **å®Œäº†ãƒã‚¤ãƒ³ãƒˆ**: å®Œäº† Issue ã®ãƒã‚¤ãƒ³ãƒˆåˆè¨ˆ
- **å®Œäº†ç‡**: ãƒã‚¤ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®å®Œäº†ç‡ï¼ˆå®Œäº†ãƒã‚¤ãƒ³ãƒˆ/ç·ãƒã‚¤ãƒ³ãƒˆæ•°ï¼‰

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†

- **åˆå›ãƒ­ãƒ¼ãƒ‰**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã¯ API å‘¼ã³å‡ºã—ã‚’ã‚¹ã‚­ãƒƒãƒ—
- **è¨­å®šå¤‰æ›´æ™‚**: å¸¸ã« API å†å‘¼ã³å‡ºã—ã§ãƒ‡ãƒ¼ã‚¿æ›´æ–°
- **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è¡¨ç¤º**: æœ€çµ‚æ›´æ–°æ™‚åˆ»ã‚’ãƒ˜ãƒƒãƒ€ãƒ¼ã«è¡¨ç¤º

#### æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ã®ç‰¹åˆ¥å‡¦ç†

```javascript
// PBL Viewer ã§ã¯ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ«ã‚¿ã‚’ API å‘¼ã³å‡ºã—æ™‚ã«é™¤å¤–
delete filtersWithoutPeriod.created_after;
delete filtersWithoutPeriod.created_before;
delete filtersWithoutPeriod.completed_after;
delete filtersWithoutPeriod.quarter;
```

#### ãƒ•ã‚£ãƒ«ã‚¿é …ç›®ï¼ˆ11 ç¨®é¡ï¼‰

1. **Service**: ã‚µãƒ¼ãƒ“ã‚¹åã§ã®çµã‚Šè¾¼ã¿
2. **Milestone**: ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã§ã®çµã‚Šè¾¼ã¿
3. **Epic**: Epic/é€šå¸¸ Issue ã§ã®çµã‚Šè¾¼ã¿
4. **Title**: ã‚¿ã‚¤ãƒˆãƒ«éƒ¨åˆ†ä¸€è‡´æ¤œç´¢
5. **Point**: æœ€å°å€¤ãƒ»æœ€å¤§å€¤ã§ã®ç¯„å›²æŒ‡å®š
6. **Kanban Status**: ã‹ã‚“ã°ã‚“ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã®çµã‚Šè¾¼ã¿
7. **Assignee**: ã‚¢ã‚µã‚¤ãƒ‹ãƒ¼ã§ã®çµã‚Šè¾¼ã¿
8. **Quarter**: å››åŠæœŸã§ã®çµã‚Šè¾¼ã¿ï¼ˆè¡¨ç¤ºã®ã¿ã€API ã«ã¯é€ä¿¡ã•ã‚Œãªã„ï¼‰
9. **Created At**: ä½œæˆæ—¥ã®æœŸé–“æŒ‡å®šï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¡¨ç¤ºã®ã¿ï¼‰
10. **Completed At**: å®Œäº†æ—¥ã®æœŸé–“æŒ‡å®šï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¡¨ç¤ºã®ã¿ï¼‰
11. **State**: opened/closed ã§ã®çŠ¶æ…‹çµã‚Šè¾¼ã¿

#### è¡¨ç¤ºè¨­å®š

- **ãƒšãƒ¼ã‚¸ãƒ³ã‚°**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç„¡åŠ¹ï¼ˆDashboard ã¨çµ±ä¸€ï¼‰
- **å…¨ä»¶è¡¨ç¤º**: `allowShowAll={true}` ã§æœ‰åŠ¹
- **åˆæœŸçŠ¶æ…‹**: `initialShowAll={true}` ã§å…¨ä»¶è¡¨ç¤ºé–‹å§‹

### å…±é€šä»•æ§˜

#### çµ±ä¸€ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½

- **å®Ÿè£…å ´æ‰€**: `/utils/issueFilters.ts` (ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰)
- **é™¤å¤–å¯¾è±¡**: `ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ`ã€`ã‚´ãƒ¼ãƒ«/ã‚¢ãƒŠã‚¦ãƒ³ã‚¹`ã€`ä¸è¦` ã® kanban_status
- **æ—¥ä»˜è£œæ­£**: created_at > completed_at ã®å ´åˆã¨ created_at < start_date ã®å ´åˆã®è‡ªå‹•è£œæ­£
- **é©ç”¨ç¯„å›²**: Dashboard ãƒãƒ£ãƒ¼ãƒˆç”Ÿæˆã€Issues ä¸€è¦§ã€PBL Viewer ã™ã¹ã¦

#### ãƒ•ã‚£ãƒ«ã‚¿ãƒªã‚»ãƒƒãƒˆ

- **Dashboard**: è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿ã‚¨ãƒªã‚¢ã§å€‹åˆ¥ãƒªã‚»ãƒƒãƒˆ
- **PBL Viewer**: å…¨ãƒ•ã‚£ãƒ«ã‚¿ä¸€æ‹¬ãƒªã‚»ãƒƒãƒˆ + API å†å‘¼ã³å‡ºã—

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

- **ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé™åˆ‡ã‚Œ**: 401/403 ã‚¨ãƒ©ãƒ¼æ™‚ã« GitLab è¨­å®šç”»é¢è¡¨ç¤º
- **æ¥ç¶šã‚¨ãƒ©ãƒ¼**: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º + å†è©¦è¡Œãƒœã‚¿ãƒ³

## è­¦å‘Šã‚·ã‚¹ãƒ†ãƒ ã®è©³ç´°èª¬æ˜

GitLab Bud Chart ã¯ã€ãƒ‡ãƒ¼ã‚¿å“è³ªã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã®ç²¾åº¦å‘ä¸Šã®ãŸã‚ã€å•é¡Œã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹Issueã‚’è‡ªå‹•æ¤œå‡ºã—è­¦å‘Šè¡¨ç¤ºã™ã‚‹ä»•çµ„ã¿ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

### è­¦å‘Šåˆ¤å®šã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°

è­¦å‘Šåˆ¤å®šã¯ **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚¹ã‚³ãƒ¼ãƒ—ãƒ•ã‚£ãƒ«ã‚¿å‡¦ç†æ™‚** ã«å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š

1. **Dashboardç”»é¢**: æœŸé–“è¨­å®šï¼ˆ`chart_start_date`ã€`chart_end_date`ï¼‰ãŒæŒ‡å®šã•ã‚ŒãŸæ™‚
2. **APIå‘¼ã³å‡ºã—**: `/api/issues/` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§æœŸé–“ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæ¸¡ã•ã‚ŒãŸæ™‚
3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶å¤‰æ›´æ™‚ã«è‡ªå‹•çš„ã«å†åˆ¤å®š

### è­¦å‘Šåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯

#### 1. æœŸé–“å‰å®Œäº†è­¦å‘Š
```
åˆ¤å®šæ¡ä»¶: completed_at < chart_start_date
è­¦å‘Šç†ç”±: æœŸé–“é–‹å§‹ã‚ˆã‚Šå‰ã«å®Œäº†ã—ã¦ã„ã‚‹ãŸã‚ã€é€²æ—ãƒãƒ£ãƒ¼ãƒˆã«æ­£ç¢ºã«åæ˜ ã•ã‚Œãªã„
å¯¾å‡¦æ³•: Due Dateã¾ãŸã¯æœŸé–“è¨­å®šã®è¦‹ç›´ã—
```

#### 2. æœŸé–“å¾Œå®Œäº†è­¦å‘Š
```
åˆ¤å®šæ¡ä»¶: completed_at > chart_end_date  
è­¦å‘Šç†ç”±: æœŸé–“çµ‚äº†ã‚ˆã‚Šå¾Œã«å®Œäº†ã—ã¦ã„ã‚‹ãŸã‚ã€é€²æ—ãƒãƒ£ãƒ¼ãƒˆã«æ­£ç¢ºã«åæ˜ ã•ã‚Œãªã„
å¯¾å‡¦æ³•: Due Dateã¾ãŸã¯æœŸé–“è¨­å®šã®è¦‹ç›´ã—
```

#### 3. Due Dateæœªè¨­å®šå®Œäº†è­¦å‘Š
```
åˆ¤å®šæ¡ä»¶: kanban_status IN ['å®Œäº†', 'å…±æœ‰å¾…ã¡'] AND due_date IS NULL
è­¦å‘Šç†ç”±: completed_atãŒè¨ˆç®—ã§ããªã„ãŸã‚ã€ã‚¹ã‚³ãƒ¼ãƒ—ã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹
å¯¾å‡¦æ³•: è©²å½“Issueã«Due Dateã‚’è¨­å®š
```

### è­¦å‘Šãƒ‡ãƒ¼ã‚¿ã®æµã‚Œ

```mermaid
flowchart LR
    A[ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰<br/>æœŸé–“è¨­å®š] --> B[ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰<br/>APIå‘¼ã³å‡ºã—]
    B --> C[ã‚¹ã‚³ãƒ¼ãƒ—ãƒ•ã‚£ãƒ«ã‚¿<br/>apply_scope_filters]
    C --> D[è­¦å‘Šåˆ¤å®š<br/>3ç¨®é¡ã®è­¦å‘Šãƒã‚§ãƒƒã‚¯]
    D --> E[ãƒ¬ã‚¹ãƒãƒ³ã‚¹<br/>issues + warnings]
    E --> F[ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰<br/>è­¦å‘Šè¡¨ç¤º]
    
    style C fill:#e1f5fe
    style D fill:#fff3e0
    style F fill:#f3e5f5
```

### è­¦å‘Šè¡¨ç¤ºã®å®Ÿè£…

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆPythonï¼‰
- **å ´æ‰€**: `backend/app/utils/issue_filters.py:apply_scope_filters()`
- **æˆ»ã‚Šå€¤**: `Tuple[List[IssueModel], List[Dict[str, Any]]]`
- **è­¦å‘Šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: `{'issue': IssueModel, 'reason': str}`

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆReactï¼‰
- **çŠ¶æ…‹ç®¡ç†**: `AppContext.dashboardWarnings`
- **è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `ExcludedIssuesWarning.tsx`
- **æ›´æ–°ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: APIå‘¼ã³å‡ºã—æ™‚ã« `SET_DASHBOARD_WARNINGS` ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§æ›´æ–°

### é‹ç”¨ã§ã®æ´»ç”¨æ–¹æ³•

1. **å®šæœŸçš„ãªè­¦å‘Šç¢ºèª**: Dashboardè¡¨ç¤ºæ™‚ã«è­¦å‘Šä»¶æ•°ã‚’ãƒã‚§ãƒƒã‚¯
2. **ãƒ‡ãƒ¼ã‚¿å“è³ªå‘ä¸Š**: è­¦å‘ŠãŒå‡ºãŸIssueã®Due Dateè¨­å®šã‚’æ¨é€²
3. **æœŸé–“è¨­å®šè¦‹ç›´ã—**: æœŸé–“å‰/å¾Œå®Œäº†ãŒå¤šã„å ´åˆã¯æœŸé–“è¨­å®šã‚’èª¿æ•´
4. **ãƒãƒ¼ãƒ æ•™è‚²**: è­¦å‘Šã®æ„å‘³ã¨å¯¾å‡¦æ³•ã‚’ãƒãƒ¼ãƒ ã§å…±æœ‰

## Issue ãƒ©ãƒ™ãƒ«è¦å‰‡

GitLab Bud Chart ã¯ä»¥ä¸‹ã®ãƒ©ãƒ™ãƒ«è¦å‰‡ã«åŸºã¥ã„ã¦ Issue ã‚’è‡ªå‹•åˆ†æã—ã¾ã™ï¼š

### ãƒã‚¤ãƒ³ãƒˆè¨­å®š

- `p:1.0`, `p:2.5`, `p:5.0` - ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
- ä¾‹: `p:3.0` = 3.0 ãƒã‚¤ãƒ³ãƒˆ

### Kanban ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

- `#ä½œæ¥­ä¸­` - é€²è¡Œä¸­ã®ã‚¿ã‚¹ã‚¯
- `#å®Œäº†` - å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯
- `#ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­` - ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡
- `#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ` - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆè‡ªå‹•é™¤å¤–å¯¾è±¡ï¼‰
- `#ã‚´ãƒ¼ãƒ«/ã‚¢ãƒŠã‚¦ãƒ³ã‚¹` - ã‚´ãƒ¼ãƒ«/ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ï¼ˆè‡ªå‹•é™¤å¤–å¯¾è±¡ï¼‰
- `#ä¸è¦` - ä¸è¦ãª Issueï¼ˆè‡ªå‹•é™¤å¤–å¯¾è±¡ï¼‰

### ã‚µãƒ¼ãƒ“ã‚¹åˆ†é¡

- `s:backend` - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–¢é€£
- `s:frontend` - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–¢é€£
- `s:infrastructure` - ã‚¤ãƒ³ãƒ•ãƒ©é–¢é€£

### å››åŠæœŸåˆ†é¡

- `@FY25Q1` - 2025 å¹´åº¦ç¬¬ 1 å››åŠæœŸ
- `@FY25Q2` - 2025 å¹´åº¦ç¬¬ 2 å››åŠæœŸ

### ã‚¨ãƒ”ãƒƒã‚¯

- `epic`

### å®Œäº†æ—¥æ™‚ï¼ˆcompleted_atï¼‰æ±ºå®šãƒ«ãƒ¼ãƒ«

GitLab Bud Chart ã§ã¯ã€Issueã®å®Œäº†æ—¥æ™‚ï¼ˆ`completed_at`ï¼‰ã‚’ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã§è‡ªå‹•æ±ºå®šã—ã¾ã™ï¼š

#### å®Œäº†æ—¥æ™‚è¨­å®šæ¡ä»¶

| æ¡ä»¶ | kanban_status | due_date | state | çµæœ | å‚™è€ƒ |
|------|---------------|----------|-------|------|------|
| 1 | `å®Œäº†` | è¨­å®šã‚ã‚Š | ä»»æ„ | `completed_at = due_date` | æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| 2 | `å…±æœ‰å¾…ã¡` | è¨­å®šã‚ã‚Š | ä»»æ„ | `completed_at = due_date` | æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| 3 | `å®Œäº†` | æœªè¨­å®š | ä»»æ„ | `completed_at = null` | âš ï¸ è­¦å‘Šå¯¾è±¡ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—é™¤å¤– |
| 4 | `å…±æœ‰å¾…ã¡` | æœªè¨­å®š | ä»»æ„ | `completed_at = null` | âš ï¸ è­¦å‘Šå¯¾è±¡ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—é™¤å¤– |
| 5 | ãã®ä»– | ä»»æ„ | `closed` | `completed_at = null` | stateã®ã¿ã§ã¯å®Œäº†æ‰±ã„ã—ãªã„ |
| 6 | ãã®ä»– | ä»»æ„ | `opened` | `completed_at = null` | æœªå®Œäº† |

#### é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

1. **GitLabã®`closed_at`ã¯ä½¿ç”¨ã—ãªã„**: kanban_statusã¨due_dateãƒ™ãƒ¼ã‚¹ã§åˆ¤å®š
2. **Due Dateå¿…é ˆ**: å®Œäº†æ‰±ã„ã™ã‚‹ã«ã¯`due_date`ã®è¨­å®šãŒå¿…è¦
3. **è­¦å‘Šã‚·ã‚¹ãƒ†ãƒ é€£æº**: Due Dateæœªè¨­å®šã®å®Œäº†Issueã¯è‡ªå‹•ã§è­¦å‘Šè¡¨ç¤º
4. **ã‚¹ã‚³ãƒ¼ãƒ—é™¤å¤–**: æ¡ä»¶3,4ã®Issueã¯Dashboardã®ã‚¹ã‚³ãƒ¼ãƒ—ã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹

#### å®Ÿè£…å ´æ‰€

- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: `backend/app/services/issue_analyzer.py:_determine_completed_at()`
- **ãƒ­ã‚¸ãƒƒã‚¯**: kanban_statusãŒã€Œå®Œäº†ã€ã€Œå…±æœ‰å¾…ã¡ã€ã®å ´åˆã®ã¿due_dateã‚’completed_atã«è¨­å®š

```python
def _determine_completed_at(self, issue: IssueModel) -> Optional[datetime]:
    if issue.due_date and issue.kanban_status:
        if issue.kanban_status in ['å®Œäº†', 'å…±æœ‰å¾…ã¡']:
            return issue.due_date
    return None
```

## è¨­è¨ˆ

- [ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ](/docs/develop/prompt.md)

![](/docs/develop/specs/rough_design.excalidraw.png)

# ä»¥ä¸‹ã€claude ãŒã¤ãã£ãŸã‚‚ã®

## æ©Ÿèƒ½

- **GitLab é€£æº**: Self-hosted GitLab ã‹ã‚‰ã® issue å–å¾—
- **Issue åˆ†æ**: ãƒ©ãƒ™ãƒ«ãƒ™ãƒ¼ã‚¹ã®è‡ªå‹•åˆ†æï¼ˆpoint, kanban_status, service, quarterï¼‰
- **Burn-up/Burn-down ãƒãƒ£ãƒ¼ãƒˆ**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—å¯è¦–åŒ–
- **Product Backlog ç®¡ç†**: Issue ä¸€è¦§è¡¨ç¤ºãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ»æ¤œç´¢
- **çµ±è¨ˆåˆ†æ**: å®Œäº†ç‡ã€ãƒ™ãƒ­ã‚·ãƒ†ã‚£ç­‰ã®çµ±è¨ˆæƒ…å ±

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Frontend**: React + TypeScript + Vite
- **Backend**: Python + FastAPI
- **Testing**: Playwright (E2E) + pytest (Backend) + Vitest (Frontend)
- **Charts**: Recharts
- **Styling**: CSS3 + Responsive Design

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Node.js 18+
- Python 3.8+
- GitLab Personal Access Token

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd gitlab-bud-chart

# Backend ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# Frontend ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
cd ../frontend
npm install
```

### èµ·å‹•

```bash
# Backendèµ·å‹•
cd backend
source venv/bin/activate
uvicorn app.main:app --reload

# Frontendèµ·å‹•ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
cd frontend
npm run dev
```

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ http://localhost:3000 ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚

### GitLab è¨­å®š

1. GitLab Personal Access Token ã‚’ä½œæˆ

   - GitLab > Settings > Access Tokens
   - æ¨©é™: `api`, `read_repository`, `read_user`

2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ GitLab è¨­å®š

   - GitLab URL: `http://your-gitlab-url`
   - Access Token: ä½œæˆã—ãŸãƒˆãƒ¼ã‚¯ãƒ³
   - Project ID: å¯¾è±¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® ID

3. Issue åˆ†æç”¨ãƒ©ãƒ™ãƒ«è¨­å®šï¼ˆè©³ç´°ã¯ `docs/develop/specs/issue_rules.md` å‚ç…§ï¼‰

## é–‹ç™º

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
â”œâ”€â”€ backend/          # Python FastAPI
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/      # API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ models/   # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ services/ # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ tests/    # ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/         # React TypeScript
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/ # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ hooks/      # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ services/   # APIå‘¼ã³å‡ºã—
â”‚   â”‚   â””â”€â”€ types/      # å‹å®šç¾©
â”‚   â””â”€â”€ tests/        # E2Eãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ docs/             # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ scripts/          # ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
./scripts/final-verification.sh

# Backend ãƒ†ã‚¹ãƒˆ
cd backend
source venv/bin/activate
pytest tests/ -v --cov=app

# Frontend E2E ãƒ†ã‚¹ãƒˆ
cd frontend
npx playwright test
```

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### GitLab Connection

- `POST /api/gitlab/connect` - GitLab æ¥ç¶šè¨­å®š
- `GET /api/gitlab/status` - æ¥ç¶šçŠ¶æ…‹ç¢ºèª

#### Issues

- `GET /api/issues` - Issue ä¸€è¦§å–å¾—
- `GET /api/issues/{id}` - Issue è©³ç´°å–å¾—
- `GET /api/issues/analyzed` - åˆ†ææ¸ˆã¿ Issue å–å¾—
- `GET /api/issues/statistics` - Issue çµ±è¨ˆæƒ…å ±

#### Charts

- `GET /api/charts/burn-down` - Burn-down ãƒãƒ£ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿
- `GET /api/charts/burn-up` - Burn-up ãƒãƒ£ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿
- `GET /api/charts/velocity` - ãƒ™ãƒ­ã‚·ãƒ†ã‚£ãƒ‡ãƒ¼ã‚¿

è©³ç´°ãª API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ http://localhost:8000/docs ã§ç¢ºèªã§ãã¾ã™ã€‚

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### æœ€é©åŒ–æ©Ÿèƒ½

- **Backend**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã€ä¸¦åˆ—å‡¦ç†ã€ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–
- **Frontend**: ä»®æƒ³åŒ–ã€ãƒ¡ãƒ¢åŒ–ã€é…å»¶èª­ã¿è¾¼ã¿
- **Charts**: ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°åˆ¶é™ã€åŠ¹ç‡çš„ãªæç”»

### æ€§èƒ½è¦ä»¶

- 1000 ä»¶ Issue å‡¦ç†: < 10 ç§’
- ãƒãƒ£ãƒ¼ãƒˆæç”»: < 3 ç§’
- UI å¿œç­”æ€§: < 1 ç§’

## ãƒ‡ãƒ—ãƒ­ã‚¤

### Dockerï¼ˆæ¨å¥¨ï¼‰

```bash
# Backend
cd backend
docker build -t gitlab-bud-chart-backend .
docker run -p 8000:8000 gitlab-bud-chart-backend

# Frontend
cd frontend
docker build -t gitlab-bud-chart-frontend .
docker run -p 3000:3000 gitlab-bud-chart-frontend
```

### æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Backend
cd backend
source venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --host 0.0.0.0 --port 8000

# Frontend
cd frontend
npm install
npm run build
npm run preview
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**GitLab æ¥ç¶šã‚¨ãƒ©ãƒ¼**

- Access Token ã®æ¨©é™ç¢ºèª
- GitLab URL ã®æ­£ç¢ºæ€§ç¢ºèª
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šç¢ºèª

**ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºã•ã‚Œãªã„**

- Issue ã«ãƒã‚¤ãƒ³ãƒˆãƒ©ãƒ™ãƒ«ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- æœŸé–“é¸æŠãŒé©åˆ‡ã‹ç¢ºèª
- ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼ç¢ºèª

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ**

- å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®å ´åˆã¯æœŸé–“ã‚’çµã‚‹
- ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç¢ºèª

### ãƒ­ã‚°ç¢ºèª

```bash
# Backend ãƒ­ã‚°
tail -f backend/logs/app.log

# Frontend ãƒ­ã‚°
ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ« > Console
```

## è²¢çŒ®

1. Issue ã§èª²é¡Œãƒ»æ©Ÿèƒ½è¦æœ›ã‚’ä½œæˆ
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã§é–‹ç™º
3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»ç¢ºèª
4. Pull Request ä½œæˆ
5. ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œãƒãƒ¼ã‚¸

### é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

- TypeScript å‹å®‰å…¨æ€§ã®ç¶­æŒ
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 80%ä»¥ä¸Š
- ESLint/Prettier è¨­å®šã«å¾“ã†
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã®éµå®ˆ

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ã‚µãƒãƒ¼ãƒˆ

- Issue å ±å‘Š: GitHub Issues
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: `docs/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- é–‹ç™ºè€…å‘ã‘: `docs/develop/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

---

**ğŸ‰ GitLab Bud Chart ã§åŠ¹ç‡çš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã‚’ï¼**
